# WormHoleChess

- [x] Do the TODO

## Backend

### Game:
- [x] Implement Board por 2 players (Base and Layer):
  - It is as simple as putting only 2 players in the game data when initializing and passing a file of initial positions with pieces for 2 players in the correct tiles.  
- [ ] Implement smaller version of game with less pieces and for 2 players for the first AI implementation. 
  - For the base board it should be just changing the number of columns and rows and the mannual connections (maybe look for some way of making it more automatic). The layer board then should be the same and work correctly. 
- [x] Implement ChessFactory to easily decide what kind of game to start and set the initial positions of the pieces. 
- [ ] Implement chess rules: 
  - [ ] How do we handle promotions? (For not we could automatically convert it to a queen always)
  - [x] King Castling
  - [ ] On passant? 
  - [x] Checks, checkmates, stalemates
  - [x] Player loses and wins 
  - [ ] Draws by agreement (add api to ask for a draw), by repetition, others? 
  - [x] Add do and undo move 
  - [ ] Fifty move rule (fifty moves without capture are a draw)
  - [ ] Same position 3 times  is also a draw. 
  - [ ] Dead positions (this could be tricky, I will just incorporate basic endings that lead to no winnning player (king vs king for example))
- [ ] Implement Monte Carlo Tree Search (or at least take a good look at how it works and what I should do, for now)
  - [ ] Hash a state: Use Zobrist Hash 
  - [ ] Selection fase
  - [ ] Expansion fase
  - [ ] Simulation fase
  - [ ] Backpropagation fase
  - [ ] 


### Tests:

- [x] Implement a testing module to be able to test the different optimizations and store results in csv. (For now its a little bit mannual)
- [x] Test each of the next optimizations. 


### Base Board Optimization: 

❌ ~~Change order of pieces to look for checks.~~ (Only works with the next optimization)
❌ ~~Stop searching other player movements if any of the moves makes a check.~~ (Not worth it, won't optimize much and itroduces a lot of changes to the code)
- [X] Look for checks from the king rather than from all the other pieces looking for the king. 
- [x] Implement Layer Board. 
  - [x] Layer board creation
  - [x] Layer board logic
  - [x] Layer board tile
  - [x] Layer board pieces
  - [x] Layer board game


### API:

- [ ] Implement game API
  - [ ] Game Start: it should allow for personalized boards? Or should that be in another api. 
  - [ ] Move
  - [ ] Surrender / Exit
  - [ ] ...


## Frontend 

- [ ] Connect game API: listen for socket messages (game_started, player_moved, player_eliminated, game_over, etc)
- [ ] Implement origin piece selection (the tile from which the piece will move, should be able to be selected from the tile and from the piece) and the destination of the movement. 
- [ ] Implement color highlighting of the possible moves of a piece when selected. 
- [ ] Implement timers sincronized with the backend for each player. 
- [ ] Implement player eliminated effect and game over pop up. 
- [ ] Implement movement history. 
- [ ] Let undo and redo only for visualization. 
- [ ] Implement a game editor in another page where you can put any pieces wherever you want and then 
- [ ] IMPORTANT! Implement page to visualize games. Do this first so that we can analyze games generated by the AI. 


## Documentacion

- [ ] Redactar introducción, explicación del juego, idea del TFG. 
- [ ] Diseñar dibujos 2d para hacer explicaciones de como lo he programado y que optimizaciones estoy haciendo. 